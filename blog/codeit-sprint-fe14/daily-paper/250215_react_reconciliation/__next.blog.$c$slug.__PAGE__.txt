1:"$Sreact.fragment"
6:I[22016,["/_next/static/chunks/c425561422a45908.js","/_next/static/chunks/796e69ae18b2784c.js"],""]
7:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
8:"$Sreact.suspense"
2:T1050,<h1>재조정 (Reconciliation)</h1>
<p>참고 - 공식 문서(https://ko.legacy.reactjs.org/docs/reconciliation.html)</p>
<p>Q. React는 DOM을 효율적으로 업데이트하기 위해 Diffing 알고리즘을 사용한다. 이때, Diffing 알고리즘과 Reconciliation의 연관성은?</p>
<h2>CRP (Critical Rendering Path)</h2>
<p>: 브라우저가 렌더링하는 방식을 일컫는다. (참고 - <a href="https://d2.naver.com/helloworld/59361">브라우저는 어떻게 동작하는가</a>)</p>
<p><img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-3.png" alt="webkit-rendering"></p>
<ol>
<li>렌더링 엔진은 HTML 파서에 의해서 HTML을 파싱한 후에 <code>DOM</code> tree를 생성합니다.</li>
<li>그 다음에 CSS 파서에 의해서 CSS를 파싱한 후에 <code>CSSOM</code> tree를 생성합니다.</li>
<li>HTML과 CSS를 파싱해서 만들어진 DOM tree와 CSSOM tree를 합쳐서 <code>render tree</code>를 만듭니다. (<code>render tree</code>: 화면에 표시되어야 할 모든 노드의 컨텐츠 , 스타일 정보 포함 )</li>
<li>Layout: Render Tree를 기반으로 실제 웹 페이지에 요소들의 배치를 결정하는 <code>layout</code> 작업을 합니다.</li>
<li>Paint: 배치가 완료되면 웹 페이지안에 실제 요소들을 화면에 나타나는 <code>paint</code> 작업을 실행합니다.</li>
</ol>
<h3>자바스크립트에 의해 DOM 수정 시 일어나는 일</h3>
<ul>
<li>Reflow: 자바스크립트로 DOM을 변경하거나, CSS에서 위치값(width, height, margin, padding 등)을 변경하는 경우</li>
<li>Repaint: 시각적 스타일만 변경하는 경우 (color, background-color, border 등)</li>
</ul>
<p>이때, Reflow가 발생하게 되면 무조건 Repaint가 일어나며, Repaint는 단독으로 일어날 수 있다.</p>
<p>위 두 과정은 브라우저 연산 중 가장 비싼 연산이며, 웹 성능 악화의 주범이 되기 때문에 최소한의 CRP 과정을 통해 화면을 그려야 한다.</p>
<h2>React 렌더링 프로세스</h2>
<p>현대 웹에서 유저 인터렉션이 많아지고 그에 따른 DOM 수정사항이 많아지게 되면서 Reflow, Repaint가 자주 일어나 성능적 문제가 발생하게 됐다.</p>
<p>이를 해결하기 위해 리액트는 자신만의 렌더링 프로세스를 만들어서 'DOM 변경을 추적해서 하나하나 문제점을 해결하는 최적화' 과정과 같은 수고스러움을 덜어주기 위해 <strong>가상 DOM</strong>(Virtual DOM) 개념을 도입하게 되었다.</p>
<p>Virtual DOM은 아래와 같은 렌더링 프로세스를 거친다.</p>
<p><img src="./screenshot/render-and-commit.png" alt="react-render-and-commit"></p>
<p>(참고 - <a href="https://react.dev/learn/render-and-commit">React render and commit</a>)</p>
<ol>
<li>Trigger: 렌더링이 트리거 된다. (손님의 주문을 주방으로 전달)</li>
<li>Render: 컴포넌트를 렌더링한다. (주방에서 주문을 준비)</li>
<li>Commit: DOM에 변경사항을 커밋한다. (테이블에 주문한 요리 서빙)</li>
</ol>
<h3>Render Phase</h3>
<ul>
<li>컴포넌트를 계산하고 업데이트 사항을 파악하는 단계</li>
<li>React Component ➡️ React Element (Object) ➡️ Virtual DOM 생성</li>
</ul>
<h3>Commit Phase</h3>
<ul>
<li>변경사항을 Virtual DOM ➡️ 실제 DOM에 반영하는 단계</li>
<li>이후 CRP를 통해 화면에 반영된다.</li>
</ul>
<h2>DOM Update가 발생되면</h2>
<p><img src="./screenshot/virtual-dom.png" alt="virtual-dom-updated"></p>
<ol>
<li>변경된 UI가 반영된 Next Virtual DOM을 만든다.</li>
<li>Next Virtual DOM 기반으로 Prev Virtual DOM과 비교하여 차이점만 업데이트 한다.
<ul>
<li>이때, 업데이트를 위해 차이점을 찾기 위해 사용되는 알고리즘이 비교(Diffing) 알고리즘</li>
<li>해당 과정 전체를 재조정(Reconciliation)이라고 한다.</li>
</ul>
</li>
<li>Commit Phase로 넘어가서 실제 DOM에 반영한다.</li>
</ol>
<h2>정리</h2>
<p>Virtual DOM을 생성하기 위한 재조정(Reconcilation) 과정 속에 비교(Diffing) 알고리즘이 사용된다.</p>
0:{"buildId":"zkizE9bspPalFbAzzM_bK","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"min-h-screen pt-32 pb-20","children":["$","div",null,{"className":"section-container max-w-3xl","children":["$","article",null,{"className":"card bg-white/70 p-8 backdrop-blur-sm md:p-12","children":[["$","header",null,{"className":"mb-8","children":[["$","h1",null,{"className":"text-text-primary mb-4 text-4xl font-bold md:text-5xl"}],["$","div",null,{"className":"text-text-secondary flex items-center gap-4","children":[["$","time",null,{}],["$","span",null,{"children":"•"}],["$","span",null,{"children":["읽기 시간: 약 ","-","분"]}]]}]]}],["$","div",null,{"className":"prose prose-invert prose-headings:text-text-primary prose-p:text-text-secondary prose-a:text-secondary-coral hover:prose-a:text-secondary-peach prose-code:text-secondary-coral prose-code:bg-secondary-mint/20 prose-code:px-2 prose-code:py-1 prose-code:rounded max-w-none","children":["$","div",null,{"dangerouslySetInnerHTML":{"__html":"$2"}}]}],"$L3"]}]}]}],["$L4"],"$L5"]}],"loading":null,"isPartial":false}
3:["$","footer",null,{"className":"border-secondary-peach/30 mt-12 border-t pt-8","children":["$","$L6",null,{"href":"/blog","className":"text-secondary-coral hover:text-secondary-peach font-medium transition-colors","children":"← 블로그로 돌아가기"}]}]
4:["$","script","script-0",{"src":"/_next/static/chunks/796e69ae18b2784c.js","async":true}]
5:["$","$L7",null,{"children":["$","$8",null,{"name":"Next.MetadataOutlet","children":"$@9"}]}]
9:null
